<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Upload Photo</title>
</head>
<body>
  <h2>ðŸ“¤ Upload Photo</h2>
  <form id="uploadForm">
    <input type="file" id="photo" accept="image/*" required><br><br>
    <button type="submit">Upload & View</button>
  </form>

  <script>
    document.getElementById('uploadForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const fileInput = document.getElementById('photo');
      const file = fileInput.files[0];

      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const img = new Image();
          img.onload = function () {
            // Resize to fit within 800x800
            const maxWidth = 800;
            const maxHeight = 800;
            let width = img.width;
            let height = img.height;

            if (width > maxWidth || height > maxHeight) {
              const scale = Math.min(maxWidth / width, maxHeight / height);
              width = width * scale;
              height = height * scale;
            }

            const canvas = document.createElement('canvas');
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, width, height);
            const resizedData = canvas.toDataURL('image/jpeg', 0.7); // 70% quality

            localStorage.setItem('uploadedImage', resizedData);
            window.location.href = "show.html";
          };
          img.src = e.target.result;
        };
        reader.readAsDataURL(file);
      } else {
        alert("Please select a photo.");
      }
    });
  </script>
</body>
</html>
